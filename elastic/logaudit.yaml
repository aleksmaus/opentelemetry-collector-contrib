receivers:
  filelog:
    start_at: beginning
    include_file_path: true
    include:
    - /Users/amaus/elastic/opentelemetry-collector-contrib/elastic/audit.log

processors:
  resource:
    attributes:
      - key: data_stream.namespace
        value: default
        action: upsert
      - key: data_stream.type
        value: logs
        action: upsert
      - key: data_stream.dataset
        value: otel.auditd.log
        action: upsert
  auditd:
    resolve_ids: true

exporters:
  debug:
    # verbosity: detailed
    verbosity: normal
  elasticsearch:
    #dry: true
    flush:
      interval: 1s
    endpoints:
      - https://0d1c5d78186540019eb8ddce80f4ef7c.us-west2.gcp.elastic-cloud.com
    user: elastic
    password: XH43fjGjleqrFzxhEY797WHT
    logs_index: "logs-otel.auditd.log-default"
    # pipeline: "logs-otel.auditd.log-pipeline"
    mapping:
      mode: otel

service:
  pipelines:
    logs:
      receivers:
        - filelog
      processors: ["resource", "auditd"]
      exporters:
        #
        - debug
        - elasticsearch
